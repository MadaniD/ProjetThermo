<?php
session_start();

$email = $_POST['login'];
$password = $_POST['mdp'];

//connexion bdd
try{$bdd = new PDO('mysql:host=localhost;dbname=thermodrone','root','issam93@');}
catch(Exception $e){die('Erreur de connexion : '.$getMessage());}

//preparation de la requête avec les variables $_POST du formulaire
$req = $bdd prepare('SELECT * FROM internaute WHERE password=:password AND email=:email');
$req execute(array('password'  $password,'email'  $email)) or die(print_r($req errorInfo()));

$donnee = $req fetch();
$req closeCursor();

switch($donnee['admin']){

case '1' 	:	//Redirection vers admin.php
$_SESSION['admin']=1;
$_SESSION['donnee'] = $donnee;
header('Location: Admin.php');
break;

case '0'		:	//Redirection vers index.php
$_SESSION['admin']=0;
$_SESSION['donnee'] = $donnee;
header('Location: Internaute.php');
break;

default			:	//Redirection vers index.php
header('Location: Index.php');
break;
}
?>




<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Untitled</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="assets/fonts/typicons.min.css">
    <link rel="stylesheet" href="assets/css/styles.min.css">
</head>

<body>
    <div class="text-center">
        <div class="container text-center">
            <form class="align-content-center" id="contactForm" action="javascript:void();" method="get">
                <fieldset style="width: 542px;">
                    <legend style="font-style: normal;font-weight: bold;font-size: 28px;">Formulaire d'inscription</legend>
                </fieldset>
                <div class="row text-start" style="padding: 0px;">
                    <div class="col-md-6" id="message-1" style="width: 349px;height: 331px;min-width: 0px;">
                        <div class="has-feedback form-group mb-3" style="height: 70px;width: 350px;"><label class="form-label" for="from_name" style="font-size: 20px;">Prénom</label><input class="form-control" type="text" style="width: 300px;height: 30px;"></div>
                        <div class="has-feedback form-group mb-3" style="width: 350px;"><label class="form-label" for="from_email" style="font-size: 20px;">Nom</label><input class="form-control" type="text" style="width: 300px;height: 30px;"></div>
                        <div class="has-feedback form-group mb-3"><label class="form-label" for="from_phone" style="font-size: 20px;">Téléphone</label><input class="form-control" type="tel" style="font-size: 21px;height: 30px;width: 300px;"></div>
                    </div>
                    <div class="col-md-6" id="message-2" style="width: 682px;">
                        <div class="has-feedback form-group mb-3" style="width: 350px;"><label class="form-label" for="from_name" style="font-size: 20px;">Email</label><input class="form-control" type="text" style="width: 300px;height: 30px;"></div>
                        <div class="has-feedback form-group mb-3"><label class="form-label" for="from_phone" style="font-size: 20px;">Mot de passe</label><input class="form-control" type="text" style="width: 300px;height: 30px;"></div>
                        <div class="has-feedback form-group mb-3" style="width: 350px;"><label class="form-label" for="from_phone" style="font-size: 20px;">Date de naissance</label><input class="form-control" type="date" style="height: 30px;width: 300px;padding-top: 0px;"></div>
                    </div>
                </div>
                <div class="text-start has-feedback form-group mb-3" style="height: 75px;"><label class="form-label text-start" for="from_phone" style="font-size: 20px;">Domicile</label><input class="form-control" type="text" style="width: 750px;height: 30px;"></div>
                <div class="row text-center d-xl-flex justify-content-xl-start">
                    <div class="col"><button class="btn btn-primary text-center d-block w-100" type="submit" style="width: 300px;height: 45px;margin: 25px;margin-top: 0px;background-color: #ff0000;">Annuler<i class="typcn typcn-delete-outline"></i></button></div>
                    <div class="col text-start d-xl-flex" style="padding-right: 50px;"><button class="btn btn-primary text-center d-block w-100" type="submit" style="width: 300px;height: 45px;margin: 0px;margin-top: 0px;">Envoyer<i class="fa fa-chevron-circle-right"></i></button></div>
                </div>
            </form>
        </div>
    </div>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
</body>

</html>

